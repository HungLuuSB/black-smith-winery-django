{% load static %}
<canvas id="topCategoriesChart"></canvas>
<script>
fetch("{% url 'api/top-category-chart' %}")
  .then(res => res.json())
  .then(chartData => {
    const ctx = document.getElementById('topCategoriesChart').getContext('2d');
    new Chart(ctx, {
      type: 'pie',
      data: {
        labels: chartData.labels,
        datasets: [{
          data: chartData.data,
          backgroundColor: [
            '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#FF9F40'
          ]
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'bottom',
          },
          title: {
            display: true,
            text: 'Top-Selling Categories'
          }
        }
      }
    });
  });
</script>